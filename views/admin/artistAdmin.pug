extends ../layouts/admin

block content
  .container.py-5
    h1.h3.mb-4 Artistas
    if users && users.length
      .table-responsive
        table.table.table-striped.table-hover.align-middle
          thead
            tr
              th Nombre
              th Rol
              th Estado
              th Creado
              th Acciones
          tbody
            each u in users
              tr
                td= u.name
                td
                  span.badge(class=u.role === 'admin' ? 'text-bg-danger' : (u.role === 'artist' ? 'text-bg-primary' : 'text-bg-secondary'))= u.role || '—'
                td
                  span.badge(class=u.active === false ? 'text-bg-secondary' : 'text-bg-success')= (u.active === false ? 'Inactivo' : 'Activo')
                td= new Date(u.createdAt).toLocaleDateString('es-ES')
                td
                  .d-flex.gap-2
                    a.btn.btn-sm.btn-outline-secondary(href=`/admin/users/${u._id}`) Ver
                    button.btn.btn-sm.btn-warning.admin-reset-pass(type='button' data-user-id=u._id aria-label='Resetear contraseña')
                      i.fas.fa-key.me-1
                      | Reset pass
                    button.btn.btn-sm.btn-secondary.admin-promote(type='button' data-user-id=u._id data-role='collector' aria-label='Degradar a collector')
                      i.fas.fa-arrow-down-long.me-1
                      | Demote to collector
                    button.btn.btn-sm.btn-danger.admin-promote(type='button' data-user-id=u._id data-role='admin' aria-label='Promover a admin')
                      i.fas.fa-user-shield.me-1
                      | Promote to admin
    else
      .alert.alert-info No hay artistas
    if typeof totalPages !== 'undefined' && totalPages > 1
      nav.mt-4(aria-label='Paginación de artistas')
        ul.pagination.justify-content-center
          - const prevDisabled = page <= 1
          - const nextDisabled = page >= totalPages
          li.page-item(class=prevDisabled ? 'disabled' : '')
            a.page-link(href=`?page=${page-1}${qsPrefix || ''}` aria-label='Anterior') «
          li.page-item.disabled
            span.page-link= `Página ${page} de ${totalPages}`
          li.page-item(class=nextDisabled ? 'disabled' : '')
            a.page-link(href=`?page=${page+1}${qsPrefix || ''}` aria-label='Siguiente') »
