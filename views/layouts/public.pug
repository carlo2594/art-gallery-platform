doctype html
html(lang='es')
  head
    title #{title || 'Galería del Ox'}
    meta(charset='utf-8')
    meta(name='viewport' content='width=device-width, initial-scale=1')

    // CSS de Bootstrap y tus estilos
    link(rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css')
    link(rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css')
    link(rel='stylesheet' href='/css/style.css')

    // Estilos opcionales (mover a /css/style.css si quieres)
    style.
      /* Centrado del contenido dentro del collapse en mobile */
      @media (max-width: 991.98px) {
        #navbarsExample05 { padding-left: 1rem; padding-right: 1rem; }
        #navbarsExample05 .navbar-nav { align-items: center; } /* centra items del ul */
        #navbarsExample05 form[role="search"] { width: 100%; max-width: 600px; }
        #navbarsExample05 .searchbar-input { width: 100%; }
      }
      /* Tamaño del buscador en desktop */
      @media (min-width: 992px) {
        #navbarsExample05 form[role="search"] .searchbar-input { width: 320px; }
      }

  body
    if !hideNavbar
      // Navbar: Expande a partir de lg (colapsa < 992px)
      nav.navbar.navbar-expand-lg.main-navbar(aria-label='Navbar principal')
        .container-fluid.navbar-container
          // Brand (logo + título) — queda a la izquierda
          a.navbar-brand.d-flex.align-items-center.navbar-logo-link(href='/')
            img.logo-navbar(src='/Logos/GOX_LOGO_06.png' alt='Galería del Ox')
            h1.ms-1.text-uppercase.fw-bold.navbar-title Galería del Ox

          // Botón hamburguesa
          button.navbar-toggler(type='button', data-bs-toggle='collapse', data-bs-target='#navbarsExample05', aria-controls='navbarsExample05', aria-expanded='false', aria-label='Abrir menú')
            span.navbar-toggler-icon

          // Contenido colapsable
          // Nota: en mobile el contenido se centra; en lg+ el ul usa ms-lg-auto para irse a la derecha
          .collapse.navbar-collapse#navbarsExample05.text-center

            // Buscador — centrado en mobile, centrado entre brand y links en desktop
            form.d-flex.flex-grow-1.flex-lg-grow-0.mx-auto.mx-lg-auto.my-3.my-lg-0(role='search' aria-label='Buscar')
              input.form-control.searchbar-input(type='search', placeholder='Buscar', aria-label='Buscar')

            // Links principales — al extremo derecho en lg+ con ms-lg-auto; centrados en mobile
            ul.navbar-nav.navbar-links.ms-lg-auto.mx-auto.mb-2.mb-lg-0.fs-5
              li.nav-item
                a.nav-link.me-lg-3(href='/obras') Obras
              li.nav-item
                a.nav-link.me-lg-3(href='/artistas') Artistas
              li.nav-item
                a.nav-link.me-lg-3(href='/exposiciones') Exposiciones

              if !currentUser
                li.nav-item
                  a.nav-link(href='/login' aria-label='Iniciar sesión') Iniciar sesión
                li.nav-item
                  a.nav-link.nav-link-registrarse(href='/signup' aria-label='Registrarse') Registrarse
              else
                li.nav-item.dropdown
                  a.nav-link.dropdown-toggle.nav-username#userMenu(
                    href='#'
                    role='button'
                    data-bs-toggle='dropdown'
                    aria-expanded='false'
                    aria-label='Menú de usuario'
                  )= currentUser.name
                  ul.dropdown-menu.dropdown-menu-end(aria-labelledby='userMenu')
                    li
                      a.dropdown-item(href='/mi-cuenta' aria-label='Ir a mi cuenta') Mi cuenta
                    li
                      hr.dropdown-divider
                    li
                      form(action='/api/v1/auth/logout' method='POST')
                        button.dropdown-item(type='submit' aria-label='Cerrar sesión') Cerrar sesión

    // Contenido de cada página
    block content

    if !hideFooter
      include ./footer.pug

    // JS de Bootstrap y otros
    script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js')
    script(src='https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js')
    script(src='/js/main.js')
