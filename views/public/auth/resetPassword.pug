extends /layouts/public

block headExtra
  - var hideNavbar = true
  - var hideFooter = true

block content
  .container.reset-password-container
    .row.justify-content-center
      .col-md-6.col-lg-5
        .d-flex.align-items-center.py-4.reset-password-bg.min-vh-100
          main.form-signin.w-100.m-auto.font-title
            form.reset-password-form(method="POST", action="/api/v1/auth/password/reset")
              a.navbar-brand.d-flex.align-items-center.navbar-logo-link.mb-4(href="/")
                img.logo-navbar(src="/Logos/GOX_LOGO_06.png" alt="Ox Gallery")
                h1.ms-1.text-uppercase.fw-bold.navbar-title Ox Gallery
              h1.h3.mb-3.fw-normal.reset-password-title.mb-3 
                if isNewPassword
                  | Create password
                else
                  | Reset password

              if error
                .alert.alert-danger.reset-password-error.mb-3= error
                if linkInvalid
                  .mb-3.text-center.text-danger
                    | The link is invalid or has already expired. Request a new one.
              if policyError
                .alert.alert-warning.reset-password-error.mb-3= policyError
              if success
                .alert.alert-success.reset-password-success.mb-3= success

              input(type="hidden", name="uid", value=uid)
              input(type="hidden", name="token", value=token)
              input(type="hidden", name="type", value=isNewPassword ? 'new' : 'reset')

              .form-floating.mb-3.reset-password-field.ox-password-reveal
                input.form-control.reset-password-input.mb-3(type="password", id="newPassword", name="newPassword", placeholder=isNewPassword ? "Password" : "New password", required, autocomplete="new-password", pattern="(?=.*[a-z])(?=.*[A-Z])(?=.*\\d).{8,}", title="It must have at least 8 characters, one uppercase letter, one lowercase letter, and one number.")
                label(for="newPassword")= isNewPassword ? "Password" : "New password"
                button.ox-password-reveal-toggle(type="button", aria-label="Show or hide contrase?a", aria-pressed="false", title="Show/hide")
                  i.fas.fa-eye-slash.ox-password-reveal-icon
              small.d-block.text-muted.mb-3 Password of at least 8 characters with one uppercase letter, one lowercase letter and one number.

              .form-floating.mb-3.reset-password-field.ox-password-reveal
                input.form-control.reset-password-input.mb-3(type="password", id="confirmPassword", name="confirmPassword", placeholder="Confirm Password", required, autocomplete="new-password", pattern="(?=.*[a-z])(?=.*[A-Z])(?=.*\\d).{8,}", title="It must have at least 8 characters, one uppercase letter, one lowercase letter, and one number.")
                label(for="confirmPassword") Confirm Password
                button.ox-password-reveal-toggle(type="button", aria-label="Show or hide contrase?a", aria-pressed="false", title="Show/hide")
                  i.fas.fa-eye-slash.ox-password-reveal-icon

              .form-check.text-start.my-3.login-signin-remember
                input.form-check-input.login-signin-checkbox(type="checkbox", value="remember-me", id="checkDefault", name="remember")
                label.form-check-label.login-signin-checkbox-label(for="checkDefault") Remember me

              button.btn.btn-primary.w-100.py-2.mt-3.mb-3.reset-password-btn(type="submit") 
                = isNewPassword ? "Create password" : "Change password"

              .d-flex.justify-content-center.mb-3
                a.btn.btn-outline-primary.ox-back-btn.reset-password-home-link(href="/")
                  i.fas.fa-arrow-left.me-2
                  | Return

              p.mt-5.mb-3.text-body-secondary.reset-password-copyright &copy; 2025 Ox Gallery
  // Validaci√≥n movida a /js/main.js
