extends ../layouts/public

block content
  // Barra de chips + botón filtros (fragmento reutilizable)
  section.filters-toolbar.py-2
    .container-xxl.d-flex.align-items-center.flex-wrap.gap-2
      include _artworkFilters.pug
      // Pasa las variables necesarias: q, materials, priceBounds, appliedPrice, actionUrl='/artworks'
          option(value='price_desc' selected=(q && q.sort==='price_desc')) Precio: mayor a menor
          option(value='top_rated' selected=(q && q.sort==='top_rated')) Mejores ratings
          option(value='most_commented' selected=(q && q.sort==='most_commented')) Más comentados

      // ...

  // Rango aplicado (visible)
  if appliedPrice && appliedPrice.minUSD != null && appliedPrice.maxUSD != null
    .container-xxl.mb-2
      .small.text-muted
        | Mostrando: $
        = appliedPrice.minUSD.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })
        |  – $
        = appliedPrice.maxUSD.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })

  // === Masonry Grid estilo Codrops ===
  section.my-5
    .container-xxl
      if artworks && artworks.length
        ul.grid.effect-2#grid
          each a in artworks
            li
              a(href=`/artworks/${a.slug || a._id}`)
                img(src=a.imageUrl)
              // Mostrar precio
              .mt-2.text-muted
                if typeof a.price === 'number'
                  span
                    = a.price.toLocaleString('en-US', { style: 'currency', currency: 'USD' })
      else
        .text-center.py-5
          p.mb-2 No hay obras publicadas todavía.
          a.btn.btn-primary(href='/signup') ¿Eres artista? Regístrate y comparte tu obra
