//- Grid de exposiciones estilo card-overlay Bootstrap

//- Eliminado espacio en blanco inicial
//- Si exhibitions es un array, mostrar cada una en su propia sección tipo hero
if Array.isArray(exhibitions)
  if exhibitions.length
    each expo in exhibitions
      section.article-template.exhibition-section(style="min-height:100vh;")
        // Cover Image with Overlay
        .article-template__hero-container.exhibition-hero-container.position-relative
          .article-template__hero-adapt.media.exhibition-hero-adapt
            if expo.coverImage
              // Image-only click target
              a(href=`/exhibitions/${expo._id}` aria-label=`Ver detalles de ${expo.title}`)
                img.exhibition-hero-image.exhibition-hero-img-absolute.shadow-lg(src=expo.coverImage, alt=expo.title, style="height: 100vh; width: 100%; object-fit: cover;")
            else
              // Placeholder with click link
              a(href=`/exhibitions/${expo._id}` aria-label=`Ver detalles de ${expo.title}`)
                .exhibition-placeholder.d-flex.align-items-center.justify-content-center(style="height: 100vh; background: linear-gradient(135deg, #343a40 0%, #495057 100%);")
                  .text-center
                    i.fas.fa-image.fa-4x.text-white.mb-3
                    .text-white.h5 Sin imagen
            
            // Overlay con información de la exposición
            .exhibition-overlay.position-absolute.bottom-0.start-0.end-0.p-4
              .exhibition-info.text-white
                h2.exhibition-title.fw-bold.mb-3(style="font-size:2.8rem; text-shadow: 0 2px 8px rgba(0,0,0,0.7);")= expo.title
                
                // Dates
                if expo.startDate && expo.endDate
                  .d-flex.align-items-center.mb-2
                    i.fas.fa-calendar-alt.me-3.text-warning(style="font-size: 1.2rem;")
                    span.h6.mb-0(style="text-shadow: 0 2px 4px rgba(0,0,0,0.5);")= `Del ${new Date(expo.startDate).toLocaleDateString()} al ${new Date(expo.endDate).toLocaleDateString()}`
                
                // Location
                if expo.location && expo.location.type
                  .d-flex.align-items-center.mb-2
                    if expo.location.type === 'physical' && expo.location.address
                      i.fas.fa-map-marker-alt.me-3.text-danger(style="font-size: 1.2rem;")
                      span.h6.mb-0(style="text-shadow: 0 2px 4px rgba(0,0,0,0.5);")= expo.location.address
                    else if expo.location.type === 'virtual' && expo.location.url
                      i.fas.fa-globe.me-3.text-info(style="font-size: 1.2rem;")
                      span.h6.mb-0(style="text-shadow: 0 2px 4px rgba(0,0,0,0.5);") Exposición Virtual
                
                // Description (truncated)
                if expo.description
                  - const desc = expo.description.length > 180 ? expo.description.slice(0, 180) + '…' : expo.description;
                  p.exhibition-description.mb-0(style="font-size:1.2rem; font-style:italic; text-shadow: 0 2px 4px rgba(0,0,0,0.5); line-height: 1.4;")= desc
  else
    .container-xxl.py-5
      .row.justify-content-center
        .col-lg-8.text-center
          h3.h4.mb-2 No hay exposiciones que coincidan con tus filtros
          p.text-muted.mb-4 Prueba ajustar el rango de fechas, el tipo o
            |  
            a(href=typeof actionUrl !== 'undefined' ? actionUrl : '/exhibitions') limpiar los filtros
          //- Skeleton placeholders (no usan scroll-snap)
          .d-grid.gap-3
            .skeleton.skeleton-hero
            .skeleton.skeleton-hero
            .skeleton.skeleton-hero
  //- Lenis smooth scroll (only for exhibitions listing)
  script(src="https://unpkg.com/@studio-freight/lenis@1.0.39/bundled/lenis.min.js")
  script.
    (function(){
      try {
        var prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        if (prefersReduced || !window.Lenis) return;
        var lenis = new Lenis({
          autoRaf: true,
          duration: 1.3,
          easing: function(t){ return Math.sin((t * Math.PI) / 2); } // easeOutSine
        });
        // Ensure body gets the snap class (CSS uses proximity)
        document.body.classList.add('exhibitions-scroll-snap');
      } catch(e) { /* noop */ }
    })();
//- Si exhibition es un objeto individual, mostrar detalle
else if exhibition
  .article-template
    .article-template__hero-container.mb-5
      .card.text-bg-dark.shadow-sm.h-100.mb-5
        if exhibition.coverImage
          img.card-img(src=exhibition.coverImage, alt=exhibition.title, style="object-fit:cover; height:300px; width:100%;")
        else
          svg.bd-placeholder-img.card-img(width="100%" height="300" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice")
            title Placeholder
            rect(width="100%" height="100%" fill="#343a40")
            text(x="50%" y="50%" fill="#eceeef" dy=".3em") Expo
        .card-img-overlay.d-flex.flex-column.justify-content-end
          h2.article-template__title.card-title= exhibition.title
          if exhibition.description
            p.card-text.article-template__content= exhibition.description
          if exhibition.startDate && exhibition.endDate
            p.card-text.mb-1
              small= `Del ${new Date(exhibition.startDate).toLocaleDateString()} al ${new Date(exhibition.endDate).toLocaleDateString()}`
          if exhibition.location && exhibition.location.type
            p.card-text.mb-1
              if exhibition.location.type === 'physical' && exhibition.location.address
                small
                  i.fas.fa-map-marker-alt.me-1
                  |  #{exhibition.location.address}
              else if exhibition.location.type === 'virtual' && exhibition.location.url
                small
                  i.fas.fa-globe.me-1
                  a.text-white(href=exhibition.location.url, target="_blank") Virtual
          p.card-text
            a.btn.btn-sm.btn-outline-light(href=`/exhibitions/${exhibition._id}`) Ver detalles
  header.page-width.page-width--narrow
    h1.article-template__title= exhibition.title
  .article-template__social-sharing.page-width.page-width--narrow
    // Aquí puedes poner botones de compartir si quieres
  .article-template__content.page-width.page-width--narrow.rte
    p= exhibition.description
    // Puedes agregar fechas, ubicación, etc.
  .article-template__back.element-margin-top.center
    a.article-template__link.link.animate-arrow(href="/exhibitions") Volver a exposiciones
